<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Assignments/Parallel Graph/README">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Parallel Graph | Operating Systems</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://localhost//operating-systems/74/Assignments/Parallel Graph/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Parallel Graph | Operating Systems"><meta data-rh="true" name="description" content="Objectives"><meta data-rh="true" property="og:description" content="Objectives"><link data-rh="true" rel="canonical" href="http://localhost//operating-systems/74/Assignments/Parallel Graph/"><link data-rh="true" rel="alternate" href="http://localhost//operating-systems/74/Assignments/Parallel Graph/" hreflang="en"><link data-rh="true" rel="alternate" href="http://localhost//operating-systems/74/Assignments/Parallel Graph/" hreflang="x-default"><link rel="stylesheet" href="/operating-systems/74/assets/css/styles.a69a9d41.css">
<link rel="preload" href="/operating-systems/74/assets/js/runtime~main.85474586.js" as="script">
<link rel="preload" href="/operating-systems/74/assets/js/main.641c9a70.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/operating-systems/74/"><div class="navbar__logo"><img src="/operating-systems/74/img/logo.svg" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/operating-systems/74/img/logo.svg" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SO</b></a><a class="navbar__item navbar__link" href="/operating-systems/74/Software Stack">Software Stack</a><a class="navbar__item navbar__link" href="/operating-systems/74/Data">Data</a><a class="navbar__item navbar__link" href="/operating-systems/74/Compute">Compute</a><a class="navbar__item navbar__link" href="/operating-systems/74/Lecture">Lecture</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/operating-systems/74/Assignments">Assignments</a><a class="navbar__item navbar__link" href="/operating-systems/74/Exams">Exams</a><a class="navbar__item navbar__link" href="/operating-systems/74/Hackathons">Hackathons</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/operating-systems/74/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/operating-systems/74/lab-setup">Setting up the Lab Environment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/74/Software Stack/">Software Stack</a><button aria-label="Toggle the collapsible sidebar category &#x27;Software Stack&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/74/Data/">Data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/74/Compute/">Compute</a><button aria-label="Toggle the collapsible sidebar category &#x27;Compute&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/74/Lecture/">Lecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lecture&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/operating-systems/74/Assignments/">Assignments</a><button aria-label="Toggle the collapsible sidebar category &#x27;Assignments&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/operating-systems/74/Assignments/Mini Libc/">Mini Libc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/operating-systems/74/Assignments/Memory Allocator/">Memory Allocator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/operating-systems/74/Assignments/Parallel Graph/">Parallel Graph</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/operating-systems/74/Assignments/Mini Shell/">Mini Shell</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/operating-systems/74/Assignments/Asynchronous Web Server/">Asynchronous Web Server</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/74/Exams/">Exams</a><button aria-label="Toggle the collapsible sidebar category &#x27;Exams&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/74/Hackathons/">Hackathons</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hackathons&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/operating-systems/74/rules-and-grading">Rules and Grading</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/operating-systems/74/resources">Resources</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/operating-systems/74/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/operating-systems/74/Assignments/"><span itemprop="name">Assignments</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Parallel Graph</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Parallel Graph</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="objectives">Objectives<a class="hash-link" href="#objectives" title="Direct link to heading">​</a></h2><ul><li>Learn how to design and implement parallel programs</li><li>Gain skills in using synchronization primitives for parallel programs</li><li>Get a better understanding of the POSIX threading and synchronization API</li><li>Gain insight on the differences between serial and parallel programs</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="statement">Statement<a class="hash-link" href="#statement" title="Direct link to heading">​</a></h2><p>Implement a generic thread pool, then use it to traverse a graph and compute the sum of the elements contained by the nodes.
You will be provided with a serial implementation of the graph traversal and with most of the data structures needed to implement the thread pool.
Your job is to write the thread pool routines and then use the thread pool to traverse the graph.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="support-code">Support Code<a class="hash-link" href="#support-code" title="Direct link to heading">​</a></h2><p>The support code consists of the directories:</p><ul><li><p><code>src/</code> is the skeleton parallel graph implementation.
You will have to implement missing parts marked as <code>TODO</code> items.</p></li><li><p><code>utils/</code> utility files (used for debugging &amp; logging)</p></li><li><p><code>tests/</code> are tests used to validate (and grade) the assignment.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation">Implementation<a class="hash-link" href="#implementation" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="thread-pool-description">Thread Pool Description<a class="hash-link" href="#thread-pool-description" title="Direct link to heading">​</a></h3><p>A thread pool contains a given number of active threads that simply wait to be given specific tasks.
The threads are created when the thread pool is created.
Each thread continuously polls the task queue for available tasks.
Once tasks are put in the task queue, the threads poll tasks, and start running them.
A thread pool creates <strong>N</strong> threads upon its creation and does not destroy (join) them throughout its lifetime.
That way, the penalty of creating and destroying threads ad-hoc is avoided.
As such, you must implement the following functions (marked with <code>TODO</code> in the provided skeleton, in <code>src/os_threadpool.c</code>):</p><ul><li><code>enqueue_task()</code>: Enqueue task to the shared task queue.
Use synchronization.</li><li><code>dequeue_task()</code>: Dequeue task from the shared task queue.
Use synchronization.</li><li><code>wait_for_completion()</code>: Wait for all worker threads.
Use synchronization.</li><li><code>create_threadpool()</code>: Create a new thread pool.</li><li><code>destroy_threadpool()</code>: Destroy a thread pool.
Assume all threads have been joined.</li></ul><p>You must also update the <code>os_threadpool_t</code> structure in <code>src/os_threadpool.h</code> with the required bits for synchronizing the parallel implementation.</p><p>Notice that the thread pool is completely independent of any given application.
Any function can be registered in the task queue.</p><p>Since the threads are polling the task queue indefinitely, you need to define a condition for them to stop once the graph has been traversed completely.
That is, the condition used by the <code>wait_for_completion()</code> function.
The recommended way is to note when no threads have any more work to do.
Since no thread is doing any work, no other task will be created.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="graph-traversal">Graph Traversal<a class="hash-link" href="#graph-traversal" title="Direct link to heading">​</a></h3><p>Once you have implemented the thread pool, you need to test it by doing a parallel traversal of all connected nodes in a graph.
A serial implementation for this algorithm is provided in <code>src/serial.c</code>.
To make use of the thread pool, you will need to create tasks that will be put in the task queue.
A task consists of 2 steps:</p><ol><li>Add the current node value to the overall sum.</li><li>Create tasks and add them to the task queue for the neighbouring nodes.</li></ol><p>Implement this in the <code>src/parallel.c</code> (see the <code>TODO</code> items).
You must implement the parallel and synchronized version of the <code>process_node()</code> function, also used in the serial implementation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="synchronization">Synchronization<a class="hash-link" href="#synchronization" title="Direct link to heading">​</a></h3><p>For synchronization you can use mutexes, semaphores, spinlocks, condition variables - anything that grinds your gear.
However, you are not allowed to use hacks such as <code>sleep()</code>, <code>printf()</code> synchronization or adding superfluous computation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="input-files">Input Files<a class="hash-link" href="#input-files" title="Direct link to heading">​</a></h3><p>Reading the graphs from the input files is being taken care of the functions implemented in <code>src/os_graph.c</code>.
A graph is represented in input files as follows:</p><ul><li>First line contains 2 integers <code>N</code> and <code>M</code>: <code>N</code> - number of nodes, <code>M</code> - numbed or edges</li><li>Second line contains <code>N</code> integer numbers - the values of the nodes.</li><li>The next <code>M</code> lines contain each 2 integers that represent the source and the destination of an edge.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-structures">Data Structures<a class="hash-link" href="#data-structures" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="graph">Graph<a class="hash-link" href="#graph" title="Direct link to heading">​</a></h4><p>A graph is represented internally by the <code>os_graph_t</code> structure (see <code>src/os_graph.h</code>).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="list">List<a class="hash-link" href="#list" title="Direct link to heading">​</a></h4><p>A list is represented internally by the <code>os_queue_t</code> structure (see <code>src/os_list.h</code>).
You will use this list to implement the task queue.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="thread-pool">Thread Pool<a class="hash-link" href="#thread-pool" title="Direct link to heading">​</a></h4><p>A thread pool is represented internally by the <code>os_threadpool_t</code> structure (see <code>src/os_threadpool.h</code>).
The thread pool contains information about the task queue and the threads.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">​</a></h3><p>Your implementation needs to be contained in the <code>src/os_threadpool.c</code>, <code>src/os_threadpool.h</code> and <code>src/parallel.c</code> files.
Any other files that you are using will not be taken into account.
Any modifications that you are doing to the other files in the <code>src/</code> directory will not be taken into account.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="operations">Operations<a class="hash-link" href="#operations" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="building">Building<a class="hash-link" href="#building" title="Direct link to heading">​</a></h3><p>To build both the serial and the parallel versions, run <code>make</code> in the <code>src/</code> directory:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">student@so:~/.../content/assignments/parallel-graph$ cd src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">student@so:~/.../assignments/parallel-graph/src$ make</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>That will create the <code>serial</code> and <code>parallel</code> binaries.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-and-grading">Testing and Grading<a class="hash-link" href="#testing-and-grading" title="Direct link to heading">​</a></h2><p>Testing is automated.
Tests are located in the <code>tests/</code> directory.</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">student@so:~/.../assignments/parallel-graph/tests$ ls -F</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Makefile  checker.py  grade.sh@  in/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To test and grade your assignment solution, enter the <code>tests/</code> directory and run <code>grade.sh</code>.
Note that this requires linters being available.
The easiest is to use a Docker-based setup with everything installed and configured.
When using <code>grade.sh</code> you will get grades for checking correctness (maximum <code>90</code> points) and for coding style (maxim <code>10</code> points).
A successful run will provide you an output ending with:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">### GRADE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checker:                                                         90/ 90</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Style:                                                           10/ 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Total:                                                          100/100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### STYLE SUMMARY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-checker">Running the Checker<a class="hash-link" href="#running-the-checker" title="Direct link to heading">​</a></h3><p>To run only the checker, use the <code>make check</code> command in the <code>tests/</code> directory:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">student@so:~/.../assignments/parallel-graph/tests$ make check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SRC_PATH=../src python checker.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make[1]: Entering directory &#x27;...&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -f *~</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TODO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test1.in                         ....................... failed ...   0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test2.in                         ....................... failed ...   0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test3.in                         ....................... failed ...   0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Total:                                                             0/100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Obviously, all tests will fail, as there is no implementation.</p><p>Each test is worth a number of points.
The maximum grade is <code>90</code>.</p><p>A successful run will show the output:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">student@so:~/.../assignments/parallel-graph/tests$ make check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SRC_PATH=../src python checker.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test1.in                         ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test2.in                         ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test3.in                         ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test4.in                         ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test5.in                         ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test6.in                         ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test7.in                         ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test8.in                         ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test9.in                         ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test10.in                        ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test11.in                        ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test12.in                        ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test13.in                        ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test14.in                        ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test15.in                        ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test16.in                        ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test17.in                        ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test18.in                        ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test19.in                        ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test20.in                        ....................... passed ...   4.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Total:                                                              90/100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-linters">Running the Linters<a class="hash-link" href="#running-the-linters" title="Direct link to heading">​</a></h3><p>To run the linters, use the <code>make lint</code> command in the <code>tests/</code> directory:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">student@so:~/.../assignments/parallel-graph/tests$ make lint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd .. &amp;&amp; checkpatch.pl -f checker/*.sh tests/*.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd .. &amp;&amp; cpplint --recursive src/ tests/ checker/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd .. &amp;&amp; shellcheck checker/*.sh tests/*.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that the linters have to be installed on your system: <a href="https://.com/torvalds/linux/blob/master/scripts/checkpatch.pl" target="_blank" rel="noopener noreferrer"><code>checkpatch.pl</code></a>, <a href="https://github.com/cpplint/cpplint" target="_blank" rel="noopener noreferrer"><code>cpplint</code></a>, <a href="https://www.shellcheck.net/" target="_blank" rel="noopener noreferrer"><code>shellcheck</code></a>.
They also need to have certain configuration options.
It&#x27;s easiest to run them in a Docker-based setup with everything configured.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fine-grained-testing">Fine-Grained Testing<a class="hash-link" href="#fine-grained-testing" title="Direct link to heading">​</a></h3><p>Input tests cases are located in <code>tests/in/</code>.
If you want to run a single test, use commands such as below while in the <code>src/</code> directory:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$./parallel ../tests/in/test5.in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-38</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./serial ../tests/in/test5.in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-38</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Results provided by the serial and parallel implementation must be the same for the test to successfully pass.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/operating-systems/74/Assignments/Memory Allocator/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Memory Allocator</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/operating-systems/74/Assignments/Mini Shell/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Minishell</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#objectives" class="table-of-contents__link toc-highlight">Objectives</a></li><li><a href="#statement" class="table-of-contents__link toc-highlight">Statement</a></li><li><a href="#support-code" class="table-of-contents__link toc-highlight">Support Code</a></li><li><a href="#implementation" class="table-of-contents__link toc-highlight">Implementation</a><ul><li><a href="#thread-pool-description" class="table-of-contents__link toc-highlight">Thread Pool Description</a></li><li><a href="#graph-traversal" class="table-of-contents__link toc-highlight">Graph Traversal</a></li><li><a href="#synchronization" class="table-of-contents__link toc-highlight">Synchronization</a></li><li><a href="#input-files" class="table-of-contents__link toc-highlight">Input Files</a></li><li><a href="#data-structures" class="table-of-contents__link toc-highlight">Data Structures</a></li><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li></ul></li><li><a href="#operations" class="table-of-contents__link toc-highlight">Operations</a><ul><li><a href="#building" class="table-of-contents__link toc-highlight">Building</a></li></ul></li><li><a href="#testing-and-grading" class="table-of-contents__link toc-highlight">Testing and Grading</a><ul><li><a href="#running-the-checker" class="table-of-contents__link toc-highlight">Running the Checker</a></li><li><a href="#running-the-linters" class="table-of-contents__link toc-highlight">Running the Linters</a></li><li><a href="#fine-grained-testing" class="table-of-contents__link toc-highlight">Fine-Grained Testing</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://curs.upb.ro" target="_blank" rel="noopener noreferrer" class="footer__link-item">Main site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ocw.cs.pub.ro/courses/so" target="_blank" rel="noopener noreferrer" class="footer__link-item">OCW<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/sisteme.de.operare/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 SO Team</div></div></div></footer></div>
<script src="/operating-systems/74/assets/js/runtime~main.85474586.js"></script>
<script src="/operating-systems/74/assets/js/main.641c9a70.js"></script>
</body>
</html>