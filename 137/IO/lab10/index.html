<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-IO/lab10">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Lab 10 - Inter-Process Communication | Operating Systems</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://localhost//operating-systems/137/IO/lab10"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab 10 - Inter-Process Communication | Operating Systems"><meta data-rh="true" name="description" content="Task: Named Pipes Communication"><meta data-rh="true" property="og:description" content="Task: Named Pipes Communication"><link data-rh="true" rel="canonical" href="http://localhost//operating-systems/137/IO/lab10"><link data-rh="true" rel="alternate" href="http://localhost//operating-systems/137/IO/lab10" hreflang="en"><link data-rh="true" rel="alternate" href="http://localhost//operating-systems/137/IO/lab10" hreflang="x-default"><link rel="stylesheet" href="/operating-systems/137/assets/css/styles.a69a9d41.css">
<link rel="preload" href="/operating-systems/137/assets/js/runtime~main.a00fea75.js" as="script">
<link rel="preload" href="/operating-systems/137/assets/js/main.076cba0f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/operating-systems/137/"><div class="navbar__logo"><img src="/operating-systems/137/img/logo.svg" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/operating-systems/137/img/logo.svg" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SO</b></a><a class="navbar__item navbar__link" href="/operating-systems/137/Software Stack">Software Stack</a><a class="navbar__item navbar__link" href="/operating-systems/137/Data">Data</a><a class="navbar__item navbar__link" href="/operating-systems/137/Compute">Compute</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/operating-systems/137/IO">IO</a><a class="navbar__item navbar__link" href="/operating-systems/137/Application Interaction">Application Interaction</a><a class="navbar__item navbar__link" href="/operating-systems/137/Assignments">Assignments</a><a class="navbar__item navbar__link" href="/operating-systems/137/Exams">Exams</a><a class="navbar__item navbar__link" href="/operating-systems/137/Hackathons">Hackathons</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/operating-systems/137/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/operating-systems/137/lab-setup">Setting up the Lab Environment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/137/Software Stack/">Software Stack</a><button aria-label="Toggle the collapsible sidebar category &#x27;Software Stack&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/137/Data/">Data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/137/Compute/">Compute</a><button aria-label="Toggle the collapsible sidebar category &#x27;Compute&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/operating-systems/137/IO/">IO</a><button aria-label="Toggle the collapsible sidebar category &#x27;IO&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/operating-systems/137/IO/">Slides</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/operating-systems/137/IO/io-overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/operating-systems/137/IO/Questions/">Questions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Questions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/operating-systems/137/IO/lab9">Lab 9 - File Descriptors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/operating-systems/137/IO/lab10">Lab 10 - Inter-Process Communication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/operating-systems/137/IO/lab11">Lab 11 - IO Optimizations</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/137/Application Interaction/">Application Interaction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Application Interaction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/137/Assignments/">Assignments</a><button aria-label="Toggle the collapsible sidebar category &#x27;Assignments&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/137/Exams/">Exams</a><button aria-label="Toggle the collapsible sidebar category &#x27;Exams&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/operating-systems/137/Hackathons/">Hackathons</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hackathons&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/operating-systems/137/rules-and-grading">Rules and Grading</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/operating-systems/137/resources">Resources</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/operating-systems/137/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/operating-systems/137/IO/"><span itemprop="name">IO</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 10 - Inter-Process Communication</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Lab 10 - Inter-Process Communication</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="task-named-pipes-communication">Task: Named Pipes Communication<a class="hash-link" href="#task-named-pipes-communication" title="Direct link to heading">​</a></h2><p>Navigate to <code>chapters/io/ipc/drills/tasks/named-pipes</code> and run <code>make</code> to generate the <code>support</code> directory.
In this exercise, you&#x27;ll implement client-server communication between two processes using a named pipe, also called <strong>FIFO</strong>.
Both the sender and receiver are created from the same binary: run without arguments for a receiver, or with <code>-s</code> for a sender.</p><ol><li><p>Use the <a href="https://man7.org/linux/man-pages/man3/mkfifo.3.html" target="_blank" rel="noopener noreferrer"><code>mkfifo()</code> syscall</a> to create a named pipe.
If the FIFO already exists, use <a href="https://man7.org/linux/man-pages/man2/access.2.html" target="_blank" rel="noopener noreferrer"><code>access()</code></a> to check its permissions.
If permissions are incorrect, or if it does not exist, recreate the FIFO.</p></li><li><p>Complete the TODOs in <code>receiver_loop()</code> and <code>sender_loop()</code> to enable communication.
Ensure the FIFO is open before reading from or writing to it.
Close the FIFO when you are done.</p><p><strong>Bonus</strong>: Run two receivers and a single sender in different terminals.
You may notice some &quot;strange&quot; behavior due to how named pipes manage data with multiple readers.
For more on this, see <a href="https://stackoverflow.com/a/69325284" target="_blank" rel="noopener noreferrer">this Stack Overflow thread</a>.</p></li><li><p>Inside the <code>tests/</code> directory, you will need to run <code>checker.sh</code>.
The output for a successful implementation should look like this:</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./checker.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Test </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> FIFO creation: PASSED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Test </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> send and receive: PASSED</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="task-unix-socket-communication">Task: UNIX Socket Communication<a class="hash-link" href="#task-unix-socket-communication" title="Direct link to heading">​</a></h2><p>Navigate to <code>chapters/io/ipc/drills/tasks/unix-socket</code> and run <code>make</code> to generate the <code>support</code> directory.
In this exercise, you&#x27;ll implement client-server communication between two processes using a <strong>UNIX socket</strong>.
Both the sender and receiver are created from the same binary: run without arguments for a receiver, or with <code>-s</code> for a sender.</p><ol><li><p>Complete the TODOs in the <code>sender_loop()</code>.
You need to verify whether the socket exists i.e. check if the receiver has created it.
Next, <strong>create</strong> your own socket and <strong>connect</strong> to the receiver&#x27;s socket using its address (<strong>Hint:</strong> use <code>get_sockaddr(&lt;path&gt;</code> to obtain it).
Once the connection is established, you can send messages using <code>send()</code>.</p></li><li><p>Complete the TODOs in the <code>receiver_loop()</code>.
Similarly, you will need to <strong>create</strong> a socket and <strong>bind</strong> it to the receiver&#x27;s address (<strong>Hint:</strong> use <code>get_sockaddr(&lt;path&gt;</code> for this).
Instead of connecting, you will <strong>listen</strong> for and <strong>accept</strong> incoming connections.
When <code>accept()</code> receives a connection request, it will return a new socket file descriptor that you can use to receive messages via <code>recv()</code>.</p></li><li><p>Inside the <code>tests/</code> directory, you will need to run <code>checker.sh</code>.
The output for a successful implementation should look like this:</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./checker.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Test </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> socket creation: PASSED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Test </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> send and receive: PASSED</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you&#x27;re having difficulties solving this exercise, go through <a href="/operating-systems/137/IO/lab10#unix-sockets">this reading material</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="task-network-socket-communication">Task: Network Socket Communication<a class="hash-link" href="#task-network-socket-communication" title="Direct link to heading">​</a></h2><p>Navigate to <code>chapters/io/ipc/drills/tasks/network-socket</code> and run <code>make</code> to generate the <code>support</code> directory.
In this exercise, you&#x27;ll implement client-server communication between two processes using a <strong>network socket</strong>.
Both the sender and receiver are created from the same binary: run without arguments for a receiver, or with <code>-s</code> for a sender.</p><ol><li><p>Complete the TODOs in the <code>sender_loop()</code> from <code>tcp_socket.c</code>.
You need to verify whether the socket exists i.e. check if the receiver has created it.
Next, <strong>create</strong> your own socket and <strong>connect</strong> to the receiver&#x27;s socket using its address (<strong>Hint:</strong> use <code>get_sockaddr(&lt;IP&gt;, &lt;PORT&gt;)</code> to obtain it).
Once the connection is established, you can send messages using <code>send()</code>.</p></li><li><p>Complete the TODOs in the <code>receiver_loop()</code> from <code>tcp_socket.c</code>.
Similarly, you will need to <strong>create</strong> a socket and <strong>bind</strong> it to the receiver&#x27;s address (<strong>Hint:</strong> use <code>get_sockaddr(&lt;IP&gt;, &lt;PORT&gt;)</code> for this).
Instead of connecting, you will <strong>listen</strong> for and <strong>accept</strong> incoming connections.
When <code>accept()</code> receives a connection request, it will return a new socket file descriptor that you can use to receive messages via <code>recv()</code>.</p></li><li><p>Now we’ll implement the same functionality using datagrams (<code>SOCK_DGRAM</code>).
Open <code>udp_socket.c</code> and complete the TODOs for <code>sender_loop()</code> and <code>receiver_loop()</code> functions.
The workflow is similar, but <code>listen()</code>, <code>accept()</code>, and <code>connect()</code> are not required for datagram sockets.</p></li><li><p>Inside the <code>tests/</code> directory, you will need to run <code>checker.sh</code>.
The output for a successful implementation should look like this:</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./checker.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Test </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> TCP state: PASSED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Sender</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: OS</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Hello OS enjoyers</span><span class="token operator" style="color:#393A34">!</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Sender</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Test </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> TCP receiving the message: PASSED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Test </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> UDP state: PASSED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Sender</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: OS</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Are you enjoying this lab?</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Sender</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Test </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> UDP receiving the message: PASSED</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you&#x27;re having difficulties solving this exercise, go through <a href="/operating-systems/137/IO/lab10#network-sockets">this reading material</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="task-receive-challenges">Task: Receive Challenges<a class="hash-link" href="#task-receive-challenges" title="Direct link to heading">​</a></h2><p>Navigate to <code>chapters/io/ipc/drills/tasks/receive-challenges</code> and run <code>make</code> to generate the <code>support</code> directory.
In this task, we will review all the IPC methods we have explored, including <a href="/operating-systems/137/IO/lab9#pipes">anonymous pipes</a>, <a href="/operating-systems/137/IO/lab9#pipes">named pipes (FIFOs)</a>, <a href="/operating-systems/137/IO/lab10#unix-sockets">UNIX sockets</a>, and <a href="/operating-systems/137/IO/lab10#network-sockets">network sockets</a>.
Each challenge involves building a communication channel using the specified IPC method.</p><ol><li><p>Complete the TODOs in <code>support/receive_pipe.c</code>, then compile and run the executable.
If the challenge is completed successfully, you should see the message <code>Flag is ...</code>.</p></li><li><p>Complete the TODOs in <code>support/receive_fifo.c</code>, then compile and run the executable.
You will need to run the <code>send_fifo</code> executable while your process is running to reveal the flag.</p></li><li><p>Complete the TODOs in <code>support/receive_unix_socket.c</code>, then compile and run the executable.
You will need to run the <code>send_unix_socket</code> executable while your process is running to reveal the flag.</p></li><li><p>Complete the TODOs in <code>support/receive_net_dgram_socket.c</code>, then compile and run the executable.
You will need to run the <code>send_net_dgram_socket</code> executable while your process is running to reveal the flag.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="unix-sockets">Unix Sockets<a class="hash-link" href="#unix-sockets" title="Direct link to heading">​</a></h2><p>Unix sockets are a inter-process communication (IPC) method that addresses some limitations of <a href="/operating-systems/137/IO/lab9#pipes">pipes</a>.
Their key characteristics are:</p><ul><li><strong>Bidirectional communication</strong>: Allowing both <code>send</code> and <code>receive</code> operations through the same file descriptor.</li><li><strong>Data transmission modes</strong>: Supporting both <code>stream</code> (continuous data flow) and <code>datagram</code> (message-based) models.</li><li><strong>Connection-based</strong>: Maintaining a connection between processes, so the sender&#x27;s identity is always known.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="api---hail-berkeley-sockets">API - Hail Berkeley Sockets<a class="hash-link" href="#api---hail-berkeley-sockets" title="Direct link to heading">​</a></h3><p>Unix sockets are managed through the <a href="https://en.wikipedia.org/wiki/Berkeley_sockets" target="_blank" rel="noopener noreferrer">Berkeley Sockets API</a>, which is widely supported across various operating systems and programming languages.
This API is not limited to <strong>Unix sockets</strong>; it also enables communication with processes on remote systems using <a href="/operating-systems/137/IO/lab10#network-sockets"><strong>network sockets</strong></a></p><p>The socket interface works similarly to the file interface, offering system calls for creating, reading, and writing data.
It also includes additional calls for setting up addresses, handling connections, and connecting to remote hosts:</p><ul><li><strong><a href="https://man7.org/linux/man-pages/man2/socket.2.html" target="_blank" rel="noopener noreferrer"><code>socket(domain, type, protocol)</code></a></strong>: Creates a new socket and returns a file descriptor for further operations.<ul><li>The <code>domain</code> argument determines whether the socket is intended for <strong>local connections</strong> (Unix socket) or <strong>remote connections</strong> (network socket).</li><li>The <code>type</code> argument specifies the communication mode, either <code>SOCK_STREAM</code> for stream-oriented communication or <code>SOCK_DGRAM</code> for datagram-oriented communication.</li><li>The <code>protocol</code> argument indicates the protocol to use, which is often set to <code>0</code>, as there is typically only one protocol available for each socket type within a specific protocol family.</li></ul></li><li><strong><a href="https://man7.org/linux/man-pages/man2/bind.2.html" target="_blank" rel="noopener noreferrer"><code>bind()</code></a></strong>: Associates an address and port with the socket.
For Unix sockets, <code>bind()</code> also creates a file on disk as the socket identifier.</li><li><strong><a href="https://man7.org/linux/man-pages/man2/listen.2.html" target="_blank" rel="noopener noreferrer"><code>listen()</code></a></strong>: Sets the socket to passive mode, preparing it to accept incoming connections.</li><li><strong><a href="https://man7.org/linux/man-pages/man2/accept.2.html" target="_blank" rel="noopener noreferrer"><code>accept()</code></a></strong>: Accepts a pending connection and returns a new socket for it, blocking if no connections are pending.</li><li><strong><a href="https://man7.org/linux/man-pages/man2/connect.2.html" target="_blank" rel="noopener noreferrer"><code>connect()</code></a></strong>: Initiates a connection to a remote socket.</li><li><strong><a href="https://man7.org/linux/man-pages/man2/send.2.html" target="_blank" rel="noopener noreferrer"><code>send()</code> / <code>sendto()</code></a></strong>: Sends data over the socket, similar to <a href="https://man7.org/linux/man-pages/man2/write.2.html" target="_blank" rel="noopener noreferrer"><code>write()</code></a>.</li><li><strong><a href="https://man7.org/linux/man-pages/man2/recv.2.html" target="_blank" rel="noopener noreferrer"><code>recv()</code> / <code>recvfrom()</code></a></strong>: Receives data from the socket, akin to <a href="https://man7.org/linux/man-pages/man2/read.2.html" target="_blank" rel="noopener noreferrer"><code>read()</code></a>.</li></ul><p>Before utilizing the API, it&#x27;s essential to understand that for two processes to communicate, they need a way to identify the socket.
This identification method is similar to that used with named pipes, relying on a file identifier stored on disk.
If the file identifier does not already exist, it will be created by the <code>bind()</code> function.
Below is an example of how to implement this in code:</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-socket&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">sockaddr_un</span><span class="token plain"> addr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Structure to hold the address for the UNIX socket.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// Clear the address structure.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sun_family </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AF_UNIX</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic">// Set the address family.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">snprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sun_path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sun_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;%s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Set the path.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sockfd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">socket</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PF_UNIX</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SOCK_STREAM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Create the socket.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sockfd </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// handle error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sockfd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">sockaddr</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Bind the socket.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rc </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// handle error</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can practice working with UNIX sockets by completing the <a href="/operating-systems/137/IO/lab10#task-unix-socket-communication">UNIX Sockets Communication task</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="network-sockets">Network Sockets<a class="hash-link" href="#network-sockets" title="Direct link to heading">​</a></h2><p>Network sockets are an inter-process communication (IPC) method that enables communication between processes on different hosts.
They are managed through the <a href="https://en.wikipedia.org/wiki/Berkeley_sockets" target="_blank" rel="noopener noreferrer">Berkeley Sockets API</a>, which is widely supported across various operating systems and programming languages.
The API is further explored in the <a href="/operating-systems/137/IO/lab10#unix-sockets">Unix sockets section</a>.
This section focuses on identifying peer processes and establishing connections between them.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="addresses-and-ports">Addresses and Ports<a class="hash-link" href="#addresses-and-ports" title="Direct link to heading">​</a></h3><p>The most crucial aspect of remote I/O is identifying the correct endpoint for communication.
Whether you are connecting to a website or a Minecraft server, you need a reliable way to specify the application you want to interact with.
This is where IP addresses and ports come into play.</p><p>An <strong>IP address</strong> is a unique numerical label assigned to each device on a network.
It functions like a mailing address, ensuring that data packets reach the correct destination.
For example, if you want to access a website, your browser connects to the server&#x27;s IP address, so that the server knows where to send the requested data.
But what if there is more than one server running at that IP address?</p><p>This is the reason we need ports.
A port is simply a <strong>number</strong> that <strong>uniquely identifies a connection</strong> on a device.
When an application performs remote I/O, it requests a port from the operating system and begins listening for incoming data on that port.
However, how do clients know which port the application is using?
Typically, this information is transmitted by user or established by convention.
For instance, popular applications have predefined ports: <code>SSH</code> uses port <code>22</code>, <code>HTTP</code> operates on port <code>80</code>, and <code>HTTPS</code> defaults to port <code>443</code>.</p><p><strong>Note</strong>: In most cases, you don’t interact with IP addresses and ports directly.
For example, when you access <code>https://cs-pub-ro.github.io/operating-systems/</code>, you don’t see any numbers.
Behind the scenes, the <a href="https://www.ibm.com/topics/dns" target="_blank" rel="noopener noreferrer">DNS</a> translates the domain name cs-pub-ro.github.io to its corresponding IP address, while the HTTPS protocol automatically uses port 443 by default.</p><p><strong>Note:</strong> You can use network sockets for communication between local processes.
Each host provides a <code>localhost</code> address (commonly <code>127.0.0.1</code>) or a loopback address that can be used for this purpose.</p><p>Let&#x27;s take a coding example to see how addresses and ports are used to identify a process over the network:</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">##define PORT </span><span class="token number" style="color:#36acaa">12345</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">sockaddr_in</span><span class="token plain"> addr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Structure to hold the address for the network socket.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                         </span><span class="token comment" style="color:#999988;font-style:italic">// Clear the address structure.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sin_family </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> AF_INET</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                              </span><span class="token comment" style="color:#999988;font-style:italic">// Set the address family to IPv4.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server_addr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sin_addr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">s_addr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">inet_addr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;127.0.0.1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Set the server&#x27;s IP address (localhost).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sin_port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">htons</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PORT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                            </span><span class="token comment" style="color:#999988;font-style:italic">// Set the port number.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> sockfd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">socket</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AF_INET</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SOCK_STREAM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// Create the socket.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sockfd </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// handle error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> rc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sockfd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">sockaddr</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Bind the socket.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rc </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// handle error</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can practice working with network sockets by completing the <a href="/operating-systems/137/IO/lab10#task-network-socket-communication">Network Sockets Communication task</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="client-server-model">Client-Server Model<a class="hash-link" href="#client-server-model" title="Direct link to heading">​</a></h2><p>In our previous IPC examples, we used the terms <strong>sender</strong> and <strong>receiver</strong>.
In practice, these are commonly referred to as the <strong>client</strong> (sender) and <strong>server</strong> (receiver).
While the socket API provides the necessary tools for communication, it doesn’t define an actual communication protocol.
This is where an <strong>application protocol</strong> comes in (distinct from transport protocols like <code>UDP</code> and <code>TCP</code>).
An application protocol defines the rules and structure for how the communication should take place.
For example, in the <a href="/operating-systems/137/IO/lab10#task-network-socket-communication">Network Sockets Communication task</a>, the <strong>server</strong> stops upon receiving the <code>exit</code> string from the <strong>client</strong>.</p><p>It’s important to keep in mind how the networking protocol impacts the design of each component:</p><ul><li>With <strong>UDP</strong> (<code>SOCK_DGRAM</code>), there is no active connection.
The server simply waits for incoming messages and handles them as they arrive.
Unlike TCP, UDP <strong>does not guarantee message delivery</strong> and messages may be lost during transmission.
It is up to the <strong>application</strong> to manage these concerns.
For example, a client might resend a request if it does not receive a response within 3 seconds.</li><li>With <strong>TCP</strong> (<code>SOCK_STREAM</code>), a <strong>connection is created and maintained</strong> between the client and server.
TCP guarantees that messages arrive in the correct order and will automatically resend data if network issues occur.</li></ul><p>For a dive into how TCP and UDP are used in real-world scenarios checkout the <a href="/operating-systems/137/IO/lab10#guide-networking-101">Networking 101 guide</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-server-udp">Client-Server UDP<a class="hash-link" href="#client-server-udp" title="Direct link to heading">​</a></h3><p>Setting up a UDP client-server communication is straightforward and lightweight.
A typical workflow for a UDP <strong>server</strong> involves:</p><ul><li><code>socket(AF_INET, SOCK_DGRAM, 0)</code> - creating a UDP network socket.</li><li><code>bind(sockfd, &amp;addr, sizeof(addr))</code> - binding the socket to an address with an <code>IP</code> and <code>port</code> for network sockets.</li><li><code>recvfrom(sockfd, buffer, BUFSIZ, 0, &amp;caddr, &amp;caddrlen);</code> - waiting for a message from the client.
<strong>Note:</strong> The last two parameters are used to retrieve the client&#x27;s address information.</li></ul><p>The server requires <code>bind()</code> to assign a specific IP and port for listening, so clients know exactly where to connect.
For network clients, <code>bind()</code> is optional;
if the IP and port are not specified, they are automatically assigned.</p><p>The typical workflow for a UDP <strong>client</strong> comprises of the following steps:</p><ul><li><code>socket(AF_INET, SOCK_DGRAM, 0)</code> - creating a UDP network socket</li><li><code>sendto(fd, buffer, BUFSIZ, 0, (struct sockaddr *)&amp;svaddr, svaddrlen);</code> - sending a message to the server.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-server-tcp">Client-Server TCP<a class="hash-link" href="#client-server-tcp" title="Direct link to heading">​</a></h3><p>Setting up a TCP client-server communication involves a few more steps than UDP but remains relatively straightforward.
A typical workflow for a TCP <strong>server</strong> is as follows:</p><ul><li><code>socket(AF_INET, SOCK_STREAM, 0)</code> - creating a TCP network socket.</li><li><code>bind(sockfd, &amp;addr, sizeof(addr))</code> - binding the socket to an address with an <code>IP</code> and <code>port</code> for network sockets.</li><li><code>listen(sockfd, backlog)</code> - marking the socket as passive, ready to accept incoming connections.
The <code>backlog</code> defines the maximum number of pending connections.
This is usually set to the maximum number of clients you are expecting.</li><li><code>accept(sockfd, &amp;client_addr, &amp;client_len)</code> - accepting a new connection from a client and returning a new socket descriptor for communication.
Keep in mind that the server will block until a connection arrives.</li><li>Once the connection is accepted, you can communicate with the client using <code>send(sockfd, buffer, BUFSIZ, 0)</code> and <code>recv(sockfd, buffer, BUFSIZ, 0)</code>.</li></ul><p><strong>Note:</strong> The server requires <code>bind()</code> to specify a particular IP and port for listening.
This way, clients can connect to the correct address.
After binding, the server uses <code>listen()</code> to prepare for incoming connections and <code>accept()</code> to handle them.</p><p>On the <strong>client</strong> side, the typical workflow is:</p><ul><li><code>socket(AF_INET, SOCK_STREAM, 0)</code> - creating a TCP network socket (also works for Unix sockets).</li><li><code>connect(sockfd, (struct sockaddr *)&amp;svaddr, svaddrlen)</code> - connecting to the server using the server&#x27;s <code>IP</code> and <code>port</code>.
Unlike UDP, <code>connect()</code> is required to establish a connection to the server.</li><li>Once connected, you can communicate with the server using <code>send(sockfd, buffer, BUFSIZ, 0)</code> and <code>recv(sockfd, buffer, BUFSIZ, 0)</code>.</li></ul><p>Test your understanding by building a <a href="/operating-systems/137/IO/lab11#task-ordered-client-server-communication">sequential client-server communication</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="guide-networking-101">Guide: Networking 101<a class="hash-link" href="#guide-networking-101" title="Direct link to heading">​</a></h2><p>In this section, we will <strong>briefly</strong> explore how networking works in general, from the perspective of the application.
Understanding the details of it, however, is beyond the scope of this course.</p><p>The main <strong>protocols</strong> used by applications are <strong>User Datagram Protocol (UDP)</strong> and <strong>Transmission Control Protocol (TCP)</strong>.</p><p>UDP is the simpler of the two protocols.
It simply sends data to a receiver identified by an IP and port.
It does not care whether the receiver has got all the data, whether it was corrupted or dropped altogether by some router along the way.</p><p>At first glance, UDP might seem useless due to its lack of reliability checks.
However, this simplicity makes UDP <strong>fast</strong>.
As a result, it is often used for <strong>real-time services</strong>, such as video streaming or voice calls, where minor data losses (like dropped frames) are less problematic because they are quickly replaced by new data, masking any errors.</p><p>On the other hand, TCP offers <strong>reliability</strong>.
It ensures that data is received correctly by performing error checks and retransmitting any lost or corrupted packets.
This makes TCP ideal for applications that require guaranteed delivery, such as <strong>web browsing</strong> or <strong>file transfers</strong>, where accuracy and completeness are critical.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="local-tcp-and-udp-services">Local TCP and UDP Services<a class="hash-link" href="#local-tcp-and-udp-services" title="Direct link to heading">​</a></h3><p>To get a full list of all network-handling processes in your system together with the protocols they&#x27;re using, we can use the <code>netstat</code> with the <code>-tuanp</code> arguments.
<code>-tuanp</code> is short for <code>-t -u -a -n -p</code>, which stand for:</p><ul><li><code>-t</code>: list processes using the TCP protocol</li><li><code>-u</code>: list processes using the UDP protocol</li><li><code>-a</code>: list both servers and clients</li><li><code>-n</code>: list IPs in numeric format</li><li><code>-p</code>: show the PID and name of each program</li></ul><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">student@os:~$ sudo netstat -tunp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Active Internet connections (w/o servers)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1057/sshd: /usr/sbi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp        0      0 127.0.0.1:6463          0.0.0.0:*               LISTEN      3261/Discord --type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp        0      0 192.168.100.2:51738     162.159.128.235:443     ESTABLISHED 3110/Discord --type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp        0      0 192.168.100.2:43694     162.159.129.235:443     ESTABLISHED 3110/Discord --type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp        0      0 192.168.100.2:56230     54.230.159.113:443      ESTABLISHED 9154/firefox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp        0      0 192.168.100.2:38096     34.107.141.31:443       ESTABLISHED 9154/firefox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp        0      0 192.168.100.2:42462     34.117.237.239:443      ESTABLISHED 9154/firefox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp        0      0 192.168.100.2:41128     162.159.135.234:443     ESTABLISHED 3110/Discord --type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp6       0      0 :::80                   :::*                    LISTEN      1114/apache2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp6       0      0 :::22                   :::*                    LISTEN      1057/sshd: /usr/sbi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp6       0      0 2a02:2f0a:c10f:97:55754 2a02:2f0c:dff0:b::1:443 ESTABLISHED 9154/firefox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcp6       0      0 2a02:2f0a:c10f:97:55750 2a02:2f0c:dff0:b::1:443 ESTABLISHED 9154/firefox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udp        0      0 0.0.0.0:56585           0.0.0.0:*                           3261/Discord --type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udp        0      0 0.0.0.0:42629           0.0.0.0:*                           3261/Discord --type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udp6       0      0 :::52070                :::*                                9154/firefox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udp6       0      0 :::38542                :::*                                9154/firefox</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Your output will likely differ from the example above.
Let’s focus on the fourth column, which displays the local address and port in use by each process.
The first 1024 ports are reserved for well-known applications, ensuring consistency across networks.
For example, <code>SSH</code> uses port <code>22</code> and <code>Apache2</code> uses port <code>80</code> for both IPv4 and IPv6 addresses (look for rows starting with <code>tcp</code> for IPv4 and <code>tcp6</code> for IPv6).</p><p>Some user programs, like Firefox, establish multiple connections, often using both IPv4 and IPv6, with each connection assigned a unique port.
Discord is another example, using TCP to handle text messages, images, videos, and other static content, while relying on UDP for real-time voice and video data during calls.</p><p><a href="/operating-systems/137/IO/Questions/firefox-tcp-udp">Quiz: Why does Firefox uses both TCP and UDP?</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">​</a></h3><p>The difference between TCP and UDP can be summarised as follows:</p><p><img loading="lazy" alt="TCP vs UDP" src="/operating-systems/137/assets/images/tcp-udp-simplified-7bb728409d8a83b05d5d574df21d9ec4.png" width="460" height="386" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/operating-systems/137/IO/lab9"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lab 9 - File Descriptors</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/operating-systems/137/IO/lab11"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lab 11 - IO Optimizations</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#task-named-pipes-communication" class="table-of-contents__link toc-highlight">Task: Named Pipes Communication</a></li><li><a href="#task-unix-socket-communication" class="table-of-contents__link toc-highlight">Task: UNIX Socket Communication</a></li><li><a href="#task-network-socket-communication" class="table-of-contents__link toc-highlight">Task: Network Socket Communication</a></li><li><a href="#task-receive-challenges" class="table-of-contents__link toc-highlight">Task: Receive Challenges</a></li><li><a href="#unix-sockets" class="table-of-contents__link toc-highlight">Unix Sockets</a><ul><li><a href="#api---hail-berkeley-sockets" class="table-of-contents__link toc-highlight">API - Hail Berkeley Sockets</a></li></ul></li><li><a href="#network-sockets" class="table-of-contents__link toc-highlight">Network Sockets</a><ul><li><a href="#addresses-and-ports" class="table-of-contents__link toc-highlight">Addresses and Ports</a></li></ul></li><li><a href="#client-server-model" class="table-of-contents__link toc-highlight">Client-Server Model</a><ul><li><a href="#client-server-udp" class="table-of-contents__link toc-highlight">Client-Server UDP</a></li><li><a href="#client-server-tcp" class="table-of-contents__link toc-highlight">Client-Server TCP</a></li></ul></li><li><a href="#guide-networking-101" class="table-of-contents__link toc-highlight">Guide: Networking 101</a><ul><li><a href="#local-tcp-and-udp-services" class="table-of-contents__link toc-highlight">Local TCP and UDP Services</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://curs.upb.ro" target="_blank" rel="noopener noreferrer" class="footer__link-item">Main site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ocw.cs.pub.ro/courses/so" target="_blank" rel="noopener noreferrer" class="footer__link-item">OCW<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/sisteme.de.operare/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 SO Team</div></div></div></footer></div>
<script src="/operating-systems/137/assets/js/runtime~main.a00fea75.js"></script>
<script src="/operating-systems/137/assets/js/main.076cba0f.js"></script>
</body>
</html>